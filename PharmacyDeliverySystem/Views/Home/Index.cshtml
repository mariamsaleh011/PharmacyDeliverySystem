@using PharmacyDeliverySystem.Models
@{
    ViewData["Title"] = "Home";
    Layout = "_Layout";

    List<Product>? offerList = ViewBag.OffersProducts as List<Product>;
}

@section Head {
    <link rel="stylesheet" href="~/css/home.css" asp-append-version="true" />
}

<section class="hero hero-en">
    <div class="hero-section">
        <div class="hero-content hero-modern">
            <h1 class="headline-en">
                <span class="accent-gradient">All-in-One</span> <br />
                Platform for Your <span class="accent-gradient">Pharmacy</span>
            </h1>
            <p class="hero-subtitle">
                Browse, order, and get all pharmacy supplies delivered quickly and safely.
            </p>
            <div class="hero-buttons">
                <button type="button" class="btn-hero-primary" onclick="orderNow()">
                    Order Now
                </button>
            </div>

            <!-- ÿ•ÿ∂ÿßŸÅÿßÿ™ ÿ¥ŸÉŸÑŸäÿ© ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿ© -->
            <div class="hero-shapes">
                <span class="shape-circle circle-1"></span>
                <span class="shape-circle circle-2"></span>
                <span class="shape-wave wave-1"></span>
                <span class="shape-wave wave-2"></span>
            </div>
        </div>
    </div>
</section>

@if (User.IsInRole("Pharmacy") && ViewBag.TotalOrders != null)
{
    <div class="dashboard-buttons">
        <h3>Pharmacy Dashboard</h3>

        <a asp-controller="Orders" asp-action="Index" class="btn btn-success m-2">
            Total Orders: @ViewBag.TotalOrders
        </a>

        <a asp-controller="Products" asp-action="Index" class="btn btn-info m-2">
            Total Products: @ViewBag.TotalProducts
        </a>

        <a asp-controller="PharmacyAuth" asp-action="AddAdmin" class="btn btn-primary m-2">
            Add Owner/Admin
        </a>

        <!-- ÿ≤ÿ±ÿßÿ± Product Management -->
        <a asp-controller="Product" asp-action="Admin" class="btn btn-success">
            Product Management
        </a>

        <!-- ÿ≤ÿ±ÿßÿ± Chats -->
        <a asp-controller="PharmacyChat" asp-action="Chats" class="btn btn-info">
            View Chats
        </a>
    </div>
}

<section class="categories categories-en">
    <div class="categories-header">
        <h3>Shop by category</h3>
    </div>

    <div class="cat-strip-wrapper">

        <!-- ÿ≤ÿ±ÿßÿ± Ÿäÿ±ÿ¨ÿπ ŸÑŸÑŸä ŸÇÿ®ŸÑ (ÿπŸÑŸâ ÿßŸÑÿ¥ŸÖÿßŸÑ) -->
        <button type="button"
                class="cat-scroll-btn cat-scroll-prev"
                aria-label="Previous categories">
            ‚Äπ
        </button>

        <!-- ÿßŸÑÿ¥ÿ±Ÿäÿ∑ ÿßŸÑŸÑŸä ŸÅŸäŸá ÿßŸÑŸÉÿ±Ÿàÿ™ -->
        <div class="cat-grid" id="catStrip">

            <!-- Offers -->
            <a href="@Url.Action("Index", "Offers")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="8" cy="8" r="2.5"></circle>
                    <circle cx="16" cy="16" r="2.5"></circle>
                    <line x1="6" y1="18" x2="18" y2="6"></line>
                </svg>
                <div class="cat-title">Special offers</div>
            </a>

            <!-- Drugs -->
            <a href="@Url.Action("Index", "Drugs")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <!-- ŸÉÿ®ÿ≥ŸàŸÑÿ© ÿØŸàÿßÿ° ŸÖÿ´ŸÑÿß -->
                    <rect x="4" y="3" width="8" height="18" rx="4"></rect>
                    <rect x="12" y="3" width="8" height="18" rx="4"></rect>
                    <line x1="8" y1="3" x2="8" y2="21"></line>
                </svg>
                <div class="cat-title">Drugs</div>
            </a>

            <!-- Baby Care -->
            <a href="@Url.Action("Index", "BabyCare")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="7" r="3"></circle>
                    <path d="M5 21c0-3.866 3.134-7 7-7s7 3.134 7 7"></path>
                </svg>
                <div class="cat-title">Baby Care</div>
            </a>

            <!-- Men Care -->
            <a href="@Url.Action("Index", "MenCare")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="7" r="4"></circle>
                    <path d="M4 21c1.5-4 6.5-6 8-6s6.5 2 8 6"></path>
                </svg>
                <div class="cat-title">Men Care</div>
            </a>

            <!-- Women Care -->
            <a href="@Url.Action("Index", "WomenCare")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="7" r="3"></circle>
                    <path d="M9 11h6"></path>
                    <path d="M10 14h4"></path>
                    <path d="M8 21c0-3 2-6 4-6s4 3 4 6"></path>
                </svg>
                <div class="cat-title">Women Care</div>
            </a>

            <!-- Makeup & Accessories -->
            <a href="@Url.Action("Index", "Makeup")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="6" height="14" rx="2"></rect>
                    <rect x="11" y="7" width="4" height="10" rx="1"></rect>
                    <circle cx="18" cy="15" r="2"></circle>
                </svg>
                <div class="cat-title">Makeup & Accessories</div>
            </a>

            <!-- Fitness & Nutrition -->
            <a href="@Url.Action("Index", "Fitness")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="9" width="4" height="6" rx="1"></rect>
                    <rect x="18" y="9" width="4" height="6" rx="1"></rect>
                    <rect x="7" y="7" width="10" height="10" rx="2"></rect>
                </svg>
                <div class="cat-title">Fitness & Nutrition</div>
            </a>

            <!-- All Products (ÿµŸÅÿ≠ÿ© ŸÉŸÑ ÿßŸÑÿ®ÿ±ŸàÿØŸÉÿ™ÿ≥) -->
            <a href="@Url.Action("Index", "Products")" class="cat-card">
                <svg class="cat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="7" height="7" rx="2"></rect>
                    <rect x="14" y="4" width="7" height="7" rx="2"></rect>
                    <rect x="3" y="13" width="7" height="7" rx="2"></rect>
                    <rect x="14" y="13" width="7" height="7" rx="2"></rect>
                </svg>
                <div class="cat-title">All Products</div>
            </a>

        </div>

        <!-- ÿ≤ÿ±ÿßÿ± Ÿäÿ±Ÿàÿ≠ ŸÑŸÑŸä ÿ®ÿπÿØ (ÿπŸÑŸâ ÿßŸÑŸäŸÖŸäŸÜ) -->
        <button type="button"
                class="cat-scroll-btn cat-scroll-next"
                aria-label="Next categories">
            ‚Ä∫
        </button>
    </div>
</section>

<section class="offers-section offers-en" id="offers">
    <h2>Special offers</h2>
    <div class="product-grid">
        @if (offerList != null && offerList.Any())
        {
            foreach (var product in offerList)
            {
                <div class="product"
                     data-name="@product.Name"
                     data-price="@product.Price"
                     data-product-id="@product.ProId">

                    @{
                        // ŸÑŸà ÿπŸÜÿØŸá ÿµŸàÿ±ÿ© ŸÜÿ≥ÿ™ÿÆÿØŸÖŸáÿßÿå ŸÑŸà ŸÖŸÅŸäÿ¥ ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ£ŸäŸÇŸàŸÜÿ© ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
                        var hasImage = !string.IsNullOrWhiteSpace(product.ImageUrl);

                        var imgSrc = hasImage
                            ? product.ImageUrl
                            : Url.Content("~/images/icons/product-default.svg");

                        var imgClass = "product-img" + (!hasImage ? " default-icon" : "");
                    }

                    <img src="@imgSrc" alt="Offer @product.Name" class="@imgClass" />

                    <h3>@product.Name</h3>

                    <p>
                        @((product.Description ?? product.Dosage) ?? "Available product")
                    </p>

                    <p class="price">
                        @if (product.OldPrice.HasValue && product.OldPrice.Value > product.Price)
                        {
                            <span class="old-price">
                                @product.OldPrice.Value.ToString("0.00 EGP")
                            </span>
                        }
                        @product.Price.ToString("0.00 EGP")
                    </p>

                    <button class="btn add-to-cart" data-product-id="@product.ProId">
                        Add to cart
                    </button>
                </div>
            }
        }
        else
        {
            <p>No special offers available right now.</p>
        }
    </div>
</section>

<section class="health-tips health-tips-en">
    <h2>üí° Health tips</h2>
    <button id="dailyTipBtn" class="btn">Tip of the day</button>
    <p id="dailyTip" style="margin-top:15px;font-weight:600;"></p>
</section>

<section class="contact-section contact-en">
    <div class="contact-container">
        <div class="footer-grid">
            <!-- 1) ÿßŸÑŸÑŸàÿ¨Ÿà + ÿßŸÑŸàÿµŸÅ -->
            <div class="footer-col footer-about">
                <div class="footer-logo">
                    <img src="@(Url.Content("~/images/icons/medicine-logo.svg"))"
                         alt="PharmacyDeliverySystem logo" />
                </div>
                <p>
                    PharmacyDeliverySystem is a digital marketplace that connects
                    pharmacies and medical suppliers to easily, conveniently and
                    quickly access and receive medicine, medical supplies and
                    cosmetics at the best prices.
                </p>
            </div>

            <!-- 2) ÿßŸÑŸÑŸäŸÜŸÉÿßÿ™ -->
            <div class="footer-col footer-links">
                <h3>Menu</h3>
                <ul>
                    <li>
                        <a href="@Url.Action("Index", "Home")">Home</a>
                    </li>
                    <li>
                        <a href="@Url.Action("Privacy", "Home")">Privacy Policy</a>
                    </li>
                    <li>
                        <a href="@Url.Action("Contact", "Home")">Contact Us</a>
                    </li>
                    <li>
                        <a href="@Url.Action("Index", "Products")">Find a Product</a>
                    </li>
                </ul>
            </div>

            <!-- 3) ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ŸàÿßÿµŸÑ -->
            <div class="footer-col footer-contact">
                <h3>Contact us</h3>
                <p>üìû 01208888148</p>
                <p>‚úâ help@pharmacymarts.com</p>
            </div>

            <!-- 4) ÿßŸÑÿ≥Ÿàÿ¥ŸäÿßŸÑ + ÿ≤ÿ±ÿßÿ± Sign in / Sign up -->
            <div class="footer-col footer-connect">
                <h3>Connect with us</h3>
                <div class="footer-social">
                    <a href="#" aria-label="Facebook">üìò</a>
                    <a href="#" aria-label="LinkedIn">üîó</a>
                    <a href="https://www.instagram.com/PharmacyMarts"
                       target="_blank" aria-label="Instagram">üì∏</a>
                    <a href="#" aria-label="X / Twitter">‚úñ</a>
                </div>

                <a href="@Url.Action("Login", "CustomerAuth")"
                   class="footer-auth-btn">
                    Sign in / Sign up
                </a>
            </div>
        </div>
    </div>
</section>
