@using PharmacyDeliverySystem.Models

@{
    ViewData["Title"] = "Products";
    Layout = "_Layout";

    var productsList = ViewBag.ProductsList as IEnumerable<Product>;
<<<<<<< HEAD
    var total = productsList?.Count() ?? 0;
}

@section Head {
    <link rel="stylesheet" href="~/css/category.css" asp-append-version="true" />
}

<section class="products products-en">
    <!-- ===== Header (icon + title + count + search) ===== -->
    <div class="products-header">
        <div class="products-header-left">
            <div class="products-header-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <!-- أيقونة Products (مربعات مثلاً) -->
                    <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                    <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                    <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                    <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                </svg>
            </div>
            <div>
                <h2 class="products-title-en">Products</h2>
                <p class="products-subtitle-en">
                    <span class="category-count">@total items</span> available
                </p>
            </div>
        </div>

        <div class="category-search">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="search"
                   class="category-search-input"
                   placeholder="Search @total products..." />
        </div>
    </div>

    <!-- ===== Products grid ===== -->
=======
}

@section Head {
    <link rel="stylesheet" href="~/css/home.css" asp-append-version="true" />
}

<section class="products">
    <h2>المنتجات</h2>
>>>>>>> upstream/Kamal-Branch
    <div class="product-grid">
        @if (productsList != null && productsList.Any())
        {
            foreach (var product in productsList)
            {
                <div class="product"
                     data-name="@product.Name"
                     data-price="@product.Price"
                     data-product-id="@product.ProId">

                    @{
<<<<<<< HEAD
                        var hasImage = !string.IsNullOrWhiteSpace(product.ImageUrl);

                        var imgSrc = hasImage
                        ? product.ImageUrl
                        : Url.Content("~/images/icons/product-default.svg");

                        var imgClass = "product-img" + (!hasImage ? " default-icon" : "");
=======
                        var imgSrc = string.IsNullOrWhiteSpace(product.ImageUrl)
                        ? "/images/icons/medicine-logo.svg"
                        : product.ImageUrl;

                        var imgClass = "product-img" + (string.IsNullOrWhiteSpace(product.ImageUrl) ? " default-icon" : "");
>>>>>>> upstream/Kamal-Branch
                    }

                    <img src="@imgSrc" alt="@product.Name" class="@imgClass" />

                    <h3>@product.Name</h3>

<<<<<<< HEAD
                    <p class="product-desc">
                        @((product.Description ?? product.Dosage) ?? "Available product")
                    </p>
=======
                    <p>@((product.Description ?? product.Dosage) ?? "منتج متوفر")</p>
>>>>>>> upstream/Kamal-Branch

                    <p class="price">
                        @if (product.OldPrice.HasValue && product.OldPrice.Value > product.Price)
                        {
<<<<<<< HEAD
                            <span class="old-price">
                                @product.OldPrice.Value.ToString("0.00 EGP")
                            </span>
                        }
                        @product.Price.ToString("0.00 EGP")
                    </p>

                    <button class="btn add-to-cart" data-product-id="@product.ProId">
                        Add to cart
=======
                            <span class="old-price">@product.OldPrice.Value.ToString("0.00 ج.م")</span>
                        }
                        @product.Price.ToString("0.00 ج.م")
                    </p>

                    <button class="btn add-to-cart" data-product-id="@product.ProId">
                        أضف للسلة
>>>>>>> upstream/Kamal-Branch
                    </button>
                </div>
            }
        }
        else
        {
<<<<<<< HEAD
            <p>No products available right now.</p>
=======
            <p>لا توجد منتجات حالياً.</p>
>>>>>>> upstream/Kamal-Branch
        }
    </div>
</section>
